<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Жаңалықтар/Новости</title>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css">
</head>
<style>
    /* Set maximum height and width of images */
    img {
        max-width: 100px;
        max-height: 100px;
        object-fit: cover;
    }

    /* Style for search input and button */
    .search-container {
        display: flex;
        justify-content: center;
        margin-top: 20px;
    }

    .search-input {
        padding: 10px;
        font-size: 16px;
        border-radius: 5px 0 0 5px;
        border: none;
        width: 70%;
    }

    .search-button {
        padding: 10px;
        background: #2196f3;
        color: white;
        font-size: 16px;
        border-radius: 0 5px 5px 0;
        border: none;
        cursor: pointer;
        width: 30%;
    }

    /* Style for news articles */
    .news-container {
        display: flex;
        flex-wrap: wrap;
        justify-content: space-around;
        margin-top: 20px;
    }

    .news-item {
        width: 300px;
        margin: 10px;
        border: 1px solid #ddd;
        border-radius: 5px;
        padding: 10px;
    }

    .news-title {
        font-size: 20px;
        font-weight: bold;
        margin-bottom: 10px;
    }

    .news-description {
        font-size: 16px;
        line-height: 1.5;
        margin-bottom: 10px;
    }

    .news-link {
        font-size: 16px;
        color: #2196f3;
        text-decoration: none;
        display: block;
        margin-top: 10px;
    }
</style>
<body>
<div class="container">
    <h1 class="my-5">Жаңалықтар/Новости</h1>
<p><input type="checkbox" id="select-all"> Выбрать все</p>
    <form id="checkbox-form">
        <div class="form-group row">
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item1"
                           value="https://rss.app/feeds/O0iorRgMF8lhuchQ.xml">
                    <label class="form-check-label" for="item1">
                        tengrinews.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item2"
                           value="https://rss.app/feeds/9XJWqk0F1RaMrkVg.xml">
                    <label class="form-check-label" for="item2">informburo.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item3"
                           value="https://rss.app/feeds/xNM4jNNZzctAbLy4.xml">
                    <label class="form-check-label" for="item3">
                        inform.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item4"
                           value="https://rss.app/feeds/z3T4hCHKax8onNvQ.xml">
                    <label class="form-check-label" for="item4">
                        ktk.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item5"
                           value="https://rss.app/feeds/Xoy8xoM2zlKC0mIB.xml">
                    <label class="form-check-label" for="item5">
                        zakon.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item6"
                           value="https://rss.app/feeds/dVRwiKnCiOmDAWOG.xml">
                    <label class="form-check-label" for="item6">
                        azattyq.org
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item7"
                           value="https://rss.app/feeds/xic3j5t6EC4hoClo.xml">
                    <label class="form-check-label" for="item7">
                        newtimes.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item8"
                           value="https://rss.app/feeds/ZFm1mG6r88jcjN1B.xml">
                    <label class="form-check-label" for="item7">
                        sputnik.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item9"
                           value="https://rss.app/feeds/vz5Z4ZntCoUVaEPD.xml">
                    <label class="form-check-label" for="item7">
                        ztb.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item10"
                           value="https://rss.app/feeds/Ub5ltyYCv9QsgC6z.xml">
                    <label class="form-check-label" for="item7">
                        ic24.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item11"
                           value="https://rss.app/feeds/NWUK1PMTmFyGCGQE.xml">
                    <label class="form-check-label" for="item7">
                        rus.azattyq.org
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item12"
                           value="https://rss.app/feeds/XgmbXpi9FEYdQg71.xml">
                    <label class="form-check-label" for="item7">
                        kaz.tengrinews.kz
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item13"
                           value="https://rss.app/feeds/IZW1GLBWQ2uendqG.xml">
                    <label class="form-check-label" for="item7">
                        365info.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item14"
                           value="https://rss.app/feeds/MYV2IMQd5f2HGhvj.xml">
                    <label class="form-check-label" for="item7">
                        kaz.365info.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item15"
                           value="https://rss.app/feeds/stZymlaeiU60Bp3g.xml">
                    <label class="form-check-label" for="item7">
                        aqparat.info
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item16"
                           value="https://rss.app/feeds/P1LukBSfCgV8xBor.xml">
                    <label class="form-check-label" for="item7">
                        primeminister.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item17"
                           value="https://rss.app/feeds/xDVaqFqERx3zu53R.xml">
                    <label class="form-check-label" for="item7">
                        egemen.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item18"
                           value="https://rss.app/feeds/ubVgHjYbHA18PFz1.xml">
                    <label class="form-check-label" for="item7">
                        baq.kz
                    </label>
                </div>
            </div>
        </div>
        <div class="form-group row">
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item19"
                           value="https://rss.app/feeds/jIe6q4dKpx7KH3RB.xml">
                    <label class="form-check-label" for="item7">
                        bestnews.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item20"
                           value="https://rss.app/feeds/pRhaWAPcHW4EoLYL.xml">
                    <label class="form-check-label" for="item7">
                        qamshy.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item21"
                           value="https://rss.app/feeds/YlT9CIYpo9aHmb7Z.xml">
                    <label class="form-check-label" for="item7">
                        vera.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item22"
                           value="https://rss.app/feeds/pKUzcrcJCXznjdJn.xml">
                    <label class="form-check-label" for="item7">
                        liter.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item23"
                           value="https://rss.app/feeds/YYyCw9WaKt5izND4.xml">
                    <label class="form-check-label" for="item7">
                        krisha.kz
                    </label>
                </div>
            </div>
            <div class="col-md-2 mb-3">
                <div class="form-check">
                    <input class="form-check-input" type="checkbox" id="item24"
                           value="https://rss.app/feeds/XDbC1dQFHccAuBIo.xml">
                    <label class="form-check-label" for="item7">
                        kn.kz
                    </label>
                </div>
            </div>
        </div>
    </form>
    <div class="form-group">
        <label for="tags-input">Filter news by tags:</label>
        <input type="text" id="tags-input" class="form-control" placeholder="Enter tags separated by comma">
    </div>
    <div class="form-group">
        <button id="search-btn" class="btn btn-primary">Search</button>
    </div>
    <div class="row" id="news-container"></div>
</div>
<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
<script>
    // Get all checkboxes
    var checkboxes = document.querySelectorAll('input[type="checkbox"]');

    // Get the "Select all" checkbox
    var selectAll = document.querySelector('#select-all');

    // Add an event listener to the "Select all" checkbox
    selectAll.addEventListener('change', function () {
        // Loop through all checkboxes
        rssLinks = [];
        for (var i = 0; i < checkboxes.length; i++) {
            // Set the state of each checkbox to the state of the "Select all" checkbox
            checkboxes[i].checked = selectAll.checked;
            if (checkboxes[i].checked) {
                rssLinks.push(checkboxes[i].value);
            }
        }
    });

    let rssLinks = [];
    let filteredNews = [];

    function parseRSS(url, callback) {
        $.ajax({
            url: "https://api.rss2json.com/v1/api.json",
            method: "GET",
            data: {
                rss_url: url,
                api_key: "acolw6gll4ylpkuf2ljsv3lbbejcoal7gotwttoj", // replace with your own API key
                count: 100,
            },
            success: function (response) {
                callback(response.items);
            },
        });
    }

    function renderNews(news) {
        let newsHtml = "";
        news.forEach(function (item) {
            newsHtml += `<div class="col-md-4">
                        <div class="card mb-4 box-shadow">
                          <div class="card-body">
                            <h4><a href="${item.link}" target="_blank">${item.title}</a></h4>
                            <p class="card-text">${item.description}</p>
                            <div class="d-flex justify-content-between align-items-center">
                              <small class="text-muted">${new Date(item.pubDate).toLocaleString()}</small>
                            </div>
                          </div>
                        </div>
                      </div>`;
        });
        $("#news-container").html(newsHtml);
    }

    function filterNewsByTags() {
        const tagsInput = $("#tags-input").val();
        const tags = tagsInput.split(",").map((tag) => tag.trim().toLowerCase());
        filteredNews = [];
        rssLinks.forEach(function (rssLink) {
            parseRSS(rssLink, function (items) {
                items.forEach(function (item) {
                    const title = item.title.toLowerCase();
                    const description = item.description.toLowerCase();
                    if (tags.every((tag) => title.includes(tag) || description.includes(tag))) {
                        filteredNews.push(item);
                    }
                });
                renderNews(filteredNews);
            });
        });
    }

    const form = document.querySelector('#checkbox-form');

    // Add an event listener to the form to listen for changes in the checkboxes
    form.addEventListener('change', () => {
        // Clear the current list of selected items
        // list.innerHTML = '';
        rssLinks = [];
        // Loop through each checkbox in the form
        form.querySelectorAll('input[type="checkbox"]').forEach((checkbox) => {
            // If the checkbox is checked, add its value to the list
            if (checkbox.checked) {
                rssLinks.push(checkbox.value);
            }
        });
    });

    function init() {
        rssLinks = [
            // "https://rss.app/feeds/O0iorRgMF8lhuchQ.xml",
            // "https://rss.app/feeds/9XJWqk0F1RaMrkVg.xml",
            // "https://rss.app/feeds/xNM4jNNZzctAbLy4.xml",
            // "https://rss.app/feeds/z3T4hCHKax8onNvQ.xml",
            // "https://rss.app/feeds/Xoy8xoM2zlKC0mIB.xml",
            // "https://rss.app/feeds/dVRwiKnCiOmDAWOG.xml",

        ];
        filterNewsByTags();
        $("#search-btn").on("click", filterNewsByTags);
    }

    $(document).ready(init);
</script>
</body>
</html>
